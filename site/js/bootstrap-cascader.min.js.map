{"version":3,"sources":["js/bootstrap-cascader.js"],"names":["$","CLS","DEF_OPTS","forceSelect","splitChar","cls","btnCls","placeHolder","dropUp","lazy","openOnHover","openOnHoverDelay","openOnHoverDelay4Lazy","isSelectable","item","selectable","loaded","children","length","TPLS","containerTpl","btnTpl","dropdownTpl","dropdownItemTpl","enHtml","value","String","replace","DropdownPanel","data","csd","setValueCallback","panel","this","setItemOpened","itemEl","panelEl","removeClass","addClass","selectItemByCode","code","trigger","setSelected","setOpen","c","scrollToOpened","isMatchedSelectedItems","withParents","currItem","j","level","selectedItem","selectedItems","selectedItemCode","currItemData","originData","parent","find","size","scrollTop","top","position","height","destroy","removeData","remove","rePosition","lastPanel","lastPanelEl","lastPanelLeft","Number","css","left","outerWidth","handler","selectItem","params","itemCode","loadingItem","loadData","then","refreshPanels","always","appendTo","el","panels","push","isParentAllMatched","hasMatchedChildren","each","i","itemData","itemName","name","n","attr","text","called","fireOnInit","reloaded","isInitialized","reloading","Cascader","originEl","def","initialized","readonly","Array","convertData2Col","isLazy","d","childMap","hasChild","undefined","updateBtnText","btn","getValue","htmlClickHandler","e","hasClass","cascader","target","parents","close","setValue","opts","extend","onSetFinish","noop","changeFired","names","oldSelectedItems","clearValue","fireInit","fireOnChange","call","updateViewByLayzData","updateViewBySelected","join","loadDataByTreePath","panelNo","rmPanels","splice","rmPanel","off","unshift","newItems","oldItems","fire","allItemsSame","oldItem","oldItemCode","oldItemName","newItem","newItemCode","newItemName","open","isReadonly","toggleClass","slice","setReadonly","reload","items","defered","Deferred","resolve","reject","promise","openedItems","cols","insertAfter","hide","on","preventDefault","stopPropagation","currentTarget","closest","openTimeout","clearTimeout","setTimeout","fn","bsCascader","args","arguments","$this","val","split","apply","prototype","jQuery"],"mappings":"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","file":"bootstrap-cascader.min.js","sourcesContent":["(function ($) {\r\n  'use strict';\r\n\r\n  // CLS\r\n  var CLS = {\r\n    cascaderItem: 'bootstrap-cascader-item',\r\n    cascaderPanel: 'bootstrap-cascader-panel',\r\n  };\r\n\r\n  // DEF_OPTS\r\n  var DEF_OPTS = {\r\n    forceSelect: false,\r\n    splitChar: ' ',\r\n    cls: '',\r\n    btnCls: 'btn-default',\r\n    placeHolder: '请选择',\r\n    dropUp: false,\r\n    lazy: false,\r\n    openOnHover: false,\r\n    openOnHoverDelay: 100,\r\n    openOnHoverDelay4Lazy: 200,\r\n    isSelectable: function (item) {\r\n      return item && (\r\n        item.selectable === true ||\r\n        item.loaded && (\r\n          !item.children ||\r\n          item.children.length <= 0\r\n        ) &&\r\n        item.selectable !== false\r\n      );\r\n    }\r\n  };\r\n\r\n  // TPLS\r\n  var TPLS = {\r\n    containerTpl: '<div class=\"btn-group bootstrap-cascader form-control\"></div>',\r\n    btnTpl: '<button class=\"btn dropdown-toggle bs-placeholder\" type=\"button\">\\\r\n        <span class=\"filter-option pull-left\"></span> <span class=\"caret icon-arrow-down\"></span> <span class=\"icon-cross bscascader-font icon-jiaochacross78\"></span>\\\r\n      </button>',\r\n    dropdownTpl: '<ul class=\"dropdown-menu ' + CLS.cascaderPanel + '\"></ul>',\r\n    dropdownItemTpl: '<li class=\"' + CLS.cascaderItem + '\">\\\r\n        <a href=\"javascript:\">\\\r\n          <span class=\"text\"></span>\\\r\n          <span class=\"bscascader-font icon-ico-right-arrow item-right-arrow\"></span>\\\r\n          <span class=\"bscascader-font icon-loading item-loading\"></span>\\\r\n          <span class=\"bscascader-font icon-error\"></span>\\\r\n        </a>\\\r\n      </li>'\r\n  };\r\n\r\n  var enHtml = function (value) {\r\n    return !value ? '' : String(value).replace(/&/g, \"&amp;\").replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\").replace(/\"/g, \"&quot;\");\r\n  };\r\n\r\n  // DropdownPanel\r\n  var DropdownPanel = function (data, csd, setValueCallback) {\r\n    if (!data || !data.children || data.children.length <= 0) {\r\n      if (setValueCallback) setValueCallback(data);\r\n      return;\r\n    }\r\n\r\n    var panel = this;\r\n\r\n    this.setItemOpened = function (item, itemEl) {\r\n      panel.panelEl.children('li').removeClass('open');\r\n      itemEl.addClass('open');\r\n      if (item.loaded && item.children.length === 0) itemEl.addClass('no-child');\r\n    };\r\n\r\n    this.selectItemByCode = function (code, setValueCallback) {\r\n      panel.panelEl.children('li[code=\"' + enHtml(code) + '\"]').trigger('selectItem', [setValueCallback]);\r\n    };\r\n\r\n    this.setSelected = function (item, setOpen) {\r\n      var itemEl = panel.panelEl.children('li[code=\"' + enHtml(item.code || item.c) + '\"]');\r\n      itemEl.children('a').addClass('selected');\r\n      if (setOpen) panel.setItemOpened(item, itemEl);\r\n      panel.scrollToOpened();\r\n    };\r\n\r\n    this.isMatchedSelectedItems = function (item, withParents) {\r\n      var currItem = item;\r\n      for (var j = item.level - 1; j >= 0; j--) {\r\n        var selectedItem = csd.selectedItems[j], selectedItemCode = selectedItem.code || selectedItem.c;\r\n        var currItemData = currItem.originData, currItemCode = currItemData.code || currItemData.c;\r\n        if (selectedItemCode != currItemCode) return false;\r\n        if (withParents === false) return true;\r\n        currItem = currItem.parent;\r\n      }\r\n      return true;\r\n    };\r\n\r\n    this.scrollToOpened = function () {\r\n      var panelEl = panel.panelEl, selectedItem = panelEl.find('li.open');\r\n      if (selectedItem.size() <= 0) selectedItem = panelEl.find('li a.selected').parent();\r\n      if (selectedItem.size() > 0) {\r\n        var scrollTop = panelEl.scrollTop(), top = selectedItem.position().top + scrollTop;\r\n        if (scrollTop < top) {\r\n          top = top - (panelEl.height() - selectedItem.height()) / 2;\r\n          panelEl.scrollTop(top);\r\n        }\r\n      }\r\n    };\r\n\r\n    this.destroy = function () {\r\n      panel.panelEl.children('li').removeData('cascaderItem');\r\n      panel.panelEl.remove();\r\n    };\r\n\r\n    this.rePosition = function (lastPanel) {\r\n      if (!lastPanel) return;\r\n\r\n      var lastPanelEl = lastPanel.panelEl, lastPanelLeft = Number((lastPanelEl.css('left') || '').replace('px', ''));\r\n      panel.panelEl.css({left: lastPanelLeft + lastPanelEl.outerWidth()})\r\n    };\r\n\r\n    this.handler = function (item, itemEl, selectItem, setValueCallback) {\r\n      if (csd.params.lazy && item.loaded === false) {\r\n        itemEl.addClass('bs-loading');\r\n        var itemCode = item.code || item.c;\r\n\r\n        if (panel.loadingItem) panel.loadingItem = false;\r\n        panel.loadingItem = itemCode;\r\n\r\n        csd.loadData(item).then(function () {\r\n          if (panel.loadingItem === itemCode)\r\n            csd.refreshPanels(item.level + 1, item, setValueCallback);\r\n        }, function () {\r\n          if (panel.loadingItem === itemCode)\r\n            itemEl.addClass('load-error');\r\n        }).always(function () {\r\n          if (panel.loadingItem === itemCode) {\r\n            panel.setItemOpened(item, itemEl);\r\n            panel.loadingItem = false;\r\n          }\r\n          itemEl.removeClass('bs-loading');\r\n        });\r\n      } else {\r\n        csd.refreshPanels(item.level + 1, item, setValueCallback);\r\n        panel.setItemOpened(item, itemEl);\r\n        if (selectItem) csd.selectItem(item, itemEl);\r\n      }\r\n    };\r\n\r\n    panel.panelEl = $(TPLS.dropdownTpl).appendTo(csd.el), panel.data = data;\r\n    panel.panelEl.data('dropdownPanel', panel);\r\n\r\n    // set panel position\r\n    var lastPanel = csd.panels[csd.panels.length - 1];\r\n    if (lastPanel) {\r\n      var lastPanelEl = lastPanel.panelEl, lastPanelLeft = Number((lastPanelEl.css('left') || '').replace('px', ''));\r\n      panel.panelEl.css({left: lastPanelLeft + lastPanelEl.outerWidth()})\r\n    }\r\n    csd.panels.push(panel);\r\n\r\n    // update panel style\r\n    if (csd.panels.length > 0) {\r\n      csd.el.children('.dropdown-menu').removeClass('first-child last-child');\r\n      csd.panels[0].panelEl.addClass('first-child');\r\n      csd.panels[csd.panels.length - 1].panelEl.addClass('last-child');\r\n    }\r\n\r\n    var isParentAllMatched = false, hasMatchedChildren = false;\r\n    if (csd.selectedItems.length > data.level) isParentAllMatched = panel.isMatchedSelectedItems(data);\r\n\r\n    $.each(data.children, function (i, item) {\r\n      var itemEl = $(TPLS.dropdownItemTpl).appendTo(panel.panelEl), itemData = item.originData;\r\n      var itemName = itemData.name || itemData.n, itemCode = itemData.code || itemData.c;\r\n      itemEl.data(\"cascaderItem\", item).attr('code', itemCode).attr('title', itemName).find('.text').text(itemName);\r\n\r\n      /*itemEl.on({\r\n        'selectItem': function (e, setValueCallback) {\r\n          console.log('---selectItem---', setValueCallback);\r\n          panel.handler(item, itemEl, false, setValueCallback);\r\n        },\r\n        'click': function (e, setValueCallback) {\r\n          console.log('---click---', setValueCallback);\r\n          panel.handler(item, itemEl, true, setValueCallback);\r\n        },\r\n        'openDropdown': function () {\r\n          console.log('---openDropdown---', setValueCallback);\r\n          panel.handler(item, itemEl);\r\n        }\r\n      });\r\n\r\n      if (csd.params.openOnHover) {\r\n        itemEl.on('mouseover', function () {\r\n          if (csd.openTimeout) clearTimeout(csd.openTimeout);\r\n          csd.openTimeout = setTimeout(function () {\r\n            panel.handler(item, itemEl);\r\n          }, csd.params.lazy ? csd.params.openOnHoverDelay4Lazy : csd.params.openOnHoverDelay);\r\n        });\r\n      }*/\r\n\r\n      if (item.loaded && (!item.children || item.children.length <= 0)) itemEl.addClass('no-child');\r\n\r\n      // update selected items view state\r\n      if (csd.selectedItems.length >= item.level && isParentAllMatched) {\r\n        if (panel.isMatchedSelectedItems(item, false)) {\r\n          hasMatchedChildren = true;\r\n          if (csd.selectedItems.length > item.level) {\r\n            panel.handler(item, itemEl, false, setValueCallback);\r\n          } else {\r\n            if (csd.selectedItems.length === csd.panels.length)\r\n              $.each(csd.selectedItems, function (j, selectedItem) {\r\n                csd.panels[j].setSelected(selectedItem, j < csd.selectedItems.length - 1);\r\n              });\r\n            if (setValueCallback) setValueCallback(item), setValueCallback.called = true;\r\n            else {\r\n              csd.fireOnInit(), csd.reloaded();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (csd.selectedItems.length > data.level && !hasMatchedChildren && csd.params.lazy) {\r\n      if ((!csd.isInitialized || csd.reloading))\r\n        csd.isInitialized ? csd.reloaded() : csd.fireOnInit();\r\n      if (setValueCallback) setValueCallback(), setValueCallback.called = true;\r\n    }\r\n\r\n    if (setValueCallback && !setValueCallback.called) setValueCallback(data);\r\n  };\r\n\r\n  // Cascader\r\n  var Cascader = function (params, originEl) {\r\n    var csd = this;\r\n    params = params || {};\r\n    for (var def in DEF_OPTS) if (typeof params[def] === 'undefined') params[def] = DEF_OPTS[def];\r\n    csd.params = params, csd.initialized = false, csd.selectedItems = [], csd.readonly = false;\r\n    if (csd.params.value instanceof Array) csd.selectedItems = [];\r\n\r\n    // initBtn\r\n    var initBtn = function () {\r\n      csd.btn = $(TPLS.btnTpl).addClass(params.btnCls).on('click', function () {\r\n        csd.open();\r\n      }).appendTo(csd.el);\r\n      csd.btn.children('.icon-cross').on('click', function (e) {\r\n        if (csd.isReadonly()) return;\r\n        csd.clearValue(true);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      });\r\n      updateBtnText(params.placeHolder);\r\n    };\r\n\r\n    // convertData2Col\r\n    var convertData2Col = function (data, parent) {\r\n      var isLazy = csd.params.lazy;\r\n      $.each(data, function (i, item) {\r\n        var itemCode = item.code || item.c, children = item.data || item.d, itemData = parent.childMap[itemCode];\r\n        if (!itemData) {\r\n          itemData = {\r\n            childMap: {}, children: [], loaded: !isLazy || (children && children.length > 0) || item.hasChild === false,\r\n            level: parent.level + 1, parent: parent, originData: item\r\n          };\r\n          parent.children.push(itemData);\r\n          parent.childMap[itemCode] = itemData;\r\n        } else itemData.loaded = !isLazy || (children && children.length > 0) || item.hasChild === false;\r\n        if (item.selectable !== undefined) itemData.selectable = item.selectable;\r\n        if (children && children.length > 0) convertData2Col(children, itemData);\r\n      });\r\n    };\r\n\r\n    // updateBtnText\r\n    var updateBtnText = function (text) {\r\n      csd.btn.attr('title', text).children('.filter-option').text(text);\r\n      if (csd.getValue().length > 0) csd.btn.removeClass('bs-placeholder').addClass('selected');\r\n      else csd.btn.addClass('bs-placeholder').removeClass('selected');\r\n    };\r\n\r\n    // htmlClickHandler\r\n    var htmlClickHandler = function (e) {\r\n      if (!csd.el.hasClass('open')) return;\r\n      var cascader = $(e.target).parents('.bootstrap-cascader');\r\n      if (cascader.size() == 0) csd.close();\r\n      else if (cascader[0] != csd.el[0]) csd.close();\r\n    };\r\n\r\n    // setValue\r\n    csd.setValue = function (value, opts) {\r\n      opts = $.extend({onSetFinish: $.noop}, opts || {});\r\n      var names = [], oldSelectedItems = csd.getValue(), changeFired;\r\n      csd.clearValue();\r\n      if (!value || !(value instanceof Array) || value.length <= 0) {\r\n        opts.fireInit ? csd.fireOnInit() : changeFired = csd.fireOnChange(oldSelectedItems, csd.getValue());\r\n        opts.onSetFinish.call(csd, changeFired);\r\n        return;\r\n      }\r\n\r\n      if (csd.params.forceSelect) {\r\n        var updateViewByLayzData = function () {\r\n          $.each(value, function (i, item) {\r\n            csd.selectedItems.push({code: item.code || item.c, name: item.name || item.n});\r\n            names.push(item.name || item.n);\r\n\r\n            if (csd.panels[i]) csd.panels[i].setSelected(item, i < csd.selectedItems.length - 1);\r\n          });\r\n          csd.updateViewBySelected(function (item) {\r\n            if (item && csd.params.isSelectable(item)) {\r\n              updateBtnText(names.join(csd.params.splitChar));\r\n            } else csd.clearValue(false);\r\n            opts.fireInit ? csd.fireOnInit() : changeFired = csd.fireOnChange(oldSelectedItems, csd.getValue());\r\n            opts.onSetFinish.call(csd, changeFired);\r\n          });\r\n        };\r\n        if (csd.params.lazy && csd.params.loadDataByTreePath) {\r\n          csd.loadDataByTreePath(value).then(function () {\r\n            updateViewByLayzData();\r\n          }, function () {\r\n            opts.fireInit ? csd.fireOnInit() : changeFired = csd.fireOnChange(oldSelectedItems, csd.getValue());\r\n            opts.onSetFinish.call(csd, changeFired);\r\n          });\r\n        } else updateViewByLayzData();\r\n      } else {\r\n        $.each(value, function (i, item) {\r\n          csd.selectedItems.push({code: item.code || item.c, name: item.name || item.n});\r\n          names.push(item.name || item.n);\r\n        });\r\n        updateBtnText(names.join(csd.params.splitChar));\r\n        csd.updateViewBySelected();\r\n        opts.fireInit ? csd.fireOnInit() : changeFired = csd.fireOnChange(oldSelectedItems, csd.getValue());\r\n        opts.onSetFinish.call(csd, changeFired);\r\n      }\r\n    };\r\n\r\n    // refreshPanels\r\n    csd.refreshPanels = function (panelNo, data, setValueCallback) {\r\n      var rmPanels = csd.panels.splice(panelNo - 1, csd.panels.length);\r\n      if (rmPanels) $.each(rmPanels, function (i, rmPanel) {\r\n        rmPanel.destroy();\r\n      });\r\n\r\n      new DropdownPanel(data, csd, setValueCallback);\r\n    };\r\n\r\n    // destroy\r\n    csd.destroy = function () {\r\n      $.each(csd.panels, function (i, panel) {\r\n        panel.destroy();\r\n      });\r\n      $('html').off('click', htmlClickHandler);\r\n      csd.params.el.removeData(\"bsCascader\");\r\n    };\r\n\r\n    // selectItem\r\n    csd.selectItem = function (item, itemEl) {\r\n      if (!csd.params.isSelectable.call(csd, item)) return;\r\n\r\n      csd.el.find('li a').removeClass('selected');\r\n      itemEl.children('a').addClass('selected');\r\n      csd.el.find('li.open a').addClass('selected');\r\n\r\n      item = item || itemEl.data('cascaderItem');\r\n      var names = [], oldSelectedItems = csd.getValue();\r\n      csd.selectedItems = [];\r\n      while (item.parent) {\r\n        var itemData = item.originData, code = itemData.code || itemData.c, name = itemData.name || itemData.n;\r\n        csd.selectedItems.unshift({code: code, name: name});\r\n        names.unshift(name);\r\n        item = item.parent;\r\n      }\r\n\r\n      updateBtnText(names.join(csd.params.splitChar));\r\n      csd.close(false);\r\n\r\n      var newItems = csd.getValue();\r\n      csd.fireOnChange(oldSelectedItems, newItems);\r\n      csd.params.el.trigger('bs.cascader.select', [newItems]);\r\n    };\r\n\r\n    // fireOnChange\r\n    csd.fireOnChange = function (oldItems, newItems) {\r\n      var fire = true;\r\n      if (oldItems != newItems && oldItems.length == newItems.length) {\r\n        var allItemsSame = true;\r\n        $.each(oldItems, function (i, oldItem) {\r\n          var oldItemCode = oldItem.code || oldItem.c, oldItemName = oldItem.name || oldItem.n;\r\n          var newItem = newItems[i], newItemCode = newItem.code || newItem.c, newItemName = newItem.name || newItem.n;\r\n          if (oldItemCode != newItemCode || oldItemName != newItemName) {\r\n            allItemsSame = false;\r\n            return false;\r\n          }\r\n        });\r\n        if (allItemsSame) fire = false;\r\n      }\r\n      if (fire) csd.params.el.trigger('bs.cascader.change', [oldItems, newItems]);\r\n      return fire;\r\n    };\r\n\r\n    // close\r\n    csd.close = function (updateViewBySelected) {\r\n      csd.el.removeClass('open');\r\n      if (updateViewBySelected !== false) csd.updateViewBySelected();\r\n    };\r\n\r\n    // update view by selected\r\n    csd.updateViewBySelected = function (setValueCallback) {\r\n      if (csd.selectedItems.length > 0 && csd.panels.length > 0)\r\n        csd.panels[0].selectItemByCode(csd.selectedItems[0].code || csd.selectedItems[0].c, setValueCallback);\r\n    };\r\n\r\n    // open\r\n    csd.open = function () {\r\n      if (csd.isReadonly()) return;\r\n      csd.el.toggleClass('open');\r\n\r\n      var lastPanel;\r\n      $.each(csd.panels, function (i, panel) {\r\n        panel.rePosition(lastPanel);\r\n        panel.scrollToOpened();\r\n        lastPanel = panel;\r\n      });\r\n    };\r\n\r\n    // getValue\r\n    csd.getValue = function () {\r\n      return csd.selectedItems.slice();\r\n    };\r\n\r\n    // clearValue\r\n    csd.clearValue = function (fire) {\r\n      csd.selectedItems = [];\r\n      csd.el.find('.dropdown-menu li a').removeClass('selected');\r\n      updateBtnText(csd.params.placeHolder);\r\n\r\n      if (fire) csd.params.el.trigger('bs.cascader.clear');\r\n    };\r\n\r\n    // setReadonly\r\n    csd.setReadonly = function (readonly) {\r\n      readonly = readonly !== false;\r\n      csd.readonly = readonly;\r\n      if (readonly) {\r\n        csd.el.addClass('readonly');\r\n        csd.btn.addClass('disabled');\r\n      } else {\r\n        csd.el.removeClass('readonly');\r\n        csd.btn.removeClass('disabled');\r\n      }\r\n    };\r\n\r\n    // isReadonly\r\n    csd.isReadonly = function () {\r\n      return csd.readonly;\r\n    };\r\n\r\n    // reload\r\n    csd.reload = function () {\r\n      csd.reloading = true, csd.data = {childMap: {}, children: [], loaded: false, level: 0};\r\n      csd.loadData().then(function () {\r\n        csd.refreshPanels(1, csd.data);\r\n        if (csd.params.value) csd.setValue(csd.params.value);\r\n        if (!csd.params.lazy || !csd.params.value) csd.reloaded();\r\n      });\r\n    };\r\n\r\n    // reloaded\r\n    csd.reloaded = function () {\r\n      if (!csd.reloading) return;\r\n\r\n      csd.reloading = false;\r\n      csd.params.el.trigger('bs.cascader.reloaded');\r\n    };\r\n\r\n    // fireOnInit\r\n    csd.fireOnInit = function () {\r\n      if (csd.isInitialized) return;\r\n\r\n      csd.isInitialized = true;\r\n      csd.params.el.trigger('bs.cascader.inited');\r\n    };\r\n\r\n    // loadDataByTreePath\r\n    csd.loadDataByTreePath = function (items) {\r\n      var defered = $.Deferred();\r\n      csd.params.loadDataByTreePath.call(csd, items, function (data) {\r\n        if (data) {\r\n          if (data.length > 0) {\r\n            if (!csd.data.originData) csd.data.originData = data;\r\n            convertData2Col(data, csd.data);\r\n            csd.data.loaded = true;\r\n            defered.resolve(data);\r\n          } else defered.reject();\r\n        } else defered.reject();\r\n      });\r\n      return defered.promise();\r\n    };\r\n\r\n    // loadData\r\n    csd.loadData = function (item) {\r\n      // get opened items\r\n      var openedItems = [];\r\n      if (item) {\r\n        var currItem = item;\r\n        while (currItem.parent) {\r\n          openedItems.unshift(currItem.originData);\r\n          currItem = currItem.parent;\r\n        }\r\n      } else item = csd.data;\r\n\r\n      var defered = $.Deferred();\r\n      csd.params.loadData.call(csd, openedItems, function (data) {\r\n        if (data) {\r\n          if (data.length > 0) {\r\n            if (!openedItems || openedItems.length <= 0) csd.data.originData = data;\r\n            convertData2Col(data, item);\r\n          }\r\n          item.loaded = true;\r\n          defered.resolve(data);\r\n        } else defered.reject();\r\n      });\r\n      return defered.promise();\r\n    };\r\n\r\n    csd.data = {childMap: {}, children: [], loaded: false, level: 0}, csd.panels = [];\r\n    csd.cols = [], csd.el = $(TPLS.containerTpl).addClass(csd.params.cls);\r\n    if (csd.params.dropUp) csd.el.addClass('dropup');\r\n    if (csd.params.replace) {\r\n      csd.el.insertAfter(params.el);\r\n      params.el.hide();\r\n    } else csd.el.appendTo(params.el);\r\n    initBtn();\r\n    if (csd.params.readonly) csd.setReadonly(true);\r\n\r\n    originEl.data(\"bsCascader\", this);\r\n    csd.loadData().always(function () {\r\n      csd.refreshPanels(1, csd.data);\r\n      if (csd.params.value) csd.setValue(csd.params.value, {fireInit: true});\r\n      else csd.fireOnInit();\r\n    });\r\n\r\n    // 在父元素一次性监听，提高性能\r\n    $(csd.el).on('selectItem', '.' + CLS.cascaderItem, function (e, setValueCallback) {\r\n      var itemEl = $(e.currentTarget), item = itemEl.data('cascaderItem');\r\n      if (!itemEl || itemEl.length <= 0 || !item) return;\r\n\r\n      var panelEl = itemEl.closest('.' + CLS.cascaderPanel), panel = panelEl.data('dropdownPanel');\r\n      if (!panelEl || panelEl.length <= 0 || !panel) return;\r\n\r\n      panel.handler(item, itemEl, false, setValueCallback);\r\n    }).on('click', '.' + CLS.cascaderItem, function (e, setValueCallback) {\r\n      var itemEl = $(e.currentTarget), item = itemEl.data('cascaderItem');\r\n      if (!itemEl || itemEl.length <= 0 || !item) return;\r\n\r\n      var panelEl = itemEl.closest('.' + CLS.cascaderPanel), panel = panelEl.data('dropdownPanel');\r\n      if (!panelEl || panelEl.length <= 0 || !panel) return;\r\n\r\n      panel.handler(item, itemEl, true, setValueCallback);\r\n    }).on('openDropdown', '.' + CLS.cascaderItem, function (e) {\r\n      var itemEl = $(e.currentTarget), item = itemEl.data('cascaderItem');\r\n      if (!itemEl || itemEl.length <= 0 || !item) return;\r\n\r\n      var panelEl = itemEl.closest('.' + CLS.cascaderPanel), panel = panelEl.data('dropdownPanel');\r\n      if (!panelEl || panelEl.length <= 0 || !panel) return;\r\n\r\n      panel.handler(item, itemEl);\r\n    });\r\n\r\n    if (csd.params.openOnHover) {\r\n      $(csd.el).on('mouseover', '.' + CLS.cascaderItem, function (e) {\r\n        var itemEl = $(e.currentTarget), item = itemEl.data('cascaderItem');\r\n        if (!itemEl || itemEl.length <= 0 || !item) return;\r\n\r\n        var panelEl = itemEl.closest('.' + CLS.cascaderPanel), panel = panelEl.data('dropdownPanel');\r\n        if (!panelEl || panelEl.length <= 0 || !panel) return;\r\n\r\n        if (csd.openTimeout) clearTimeout(csd.openTimeout);\r\n        csd.openTimeout = setTimeout(function () {\r\n          panel.handler(item, itemEl);\r\n        }, csd.params.lazy ? csd.params.openOnHoverDelay4Lazy : csd.params.openOnHoverDelay);\r\n      });\r\n    }\r\n\r\n    $('html').on('click', htmlClickHandler);\r\n  };\r\n\r\n  $.fn.bsCascader = function (params) {\r\n    var args = arguments;\r\n    return this.each(function () {\r\n      if (!this) return;\r\n      var $this = $(this);\r\n\r\n      var bsCascader = $this.data(\"bsCascader\");\r\n      if (!bsCascader && params != 'destroy') {\r\n        params = $.extend({\r\n          el: $this, value: $this.val() ? $this.val().split(params.splitChar || ' ') : ''\r\n        }, params);\r\n        bsCascader = new Cascader(params, $this);\r\n      }\r\n      if (bsCascader && typeof params === typeof \"\")\r\n        bsCascader[params].apply(bsCascader, Array.prototype.slice.call(args, 1));\r\n    });\r\n  }\r\n\r\n})(jQuery);\r\n"]}
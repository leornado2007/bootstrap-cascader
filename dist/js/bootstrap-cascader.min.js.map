{"version":3,"sources":["js/bootstrap-cascader.js"],"names":["$","DEF_OPTS","forceSelect","splitChar","cls","btnCls","placeHolder","dropUp","lazy","openOnHover","openOnHoverDelay","openOnHoverDelay4Lazy","isSelectable","item","selectable","loaded","children","length","TPLS","enHtml","value","String","replace","DropdownPanel","data","csd","setValueCallback","panel","this","setItemOpened","itemEl","panelEl","removeClass","addClass","selectItemByCode","code","trigger","setSelected","setOpen","c","scrollToOpened","isMatchedSelectedItems","withParents","currItem","j","level","selectedItem","selectedItems","selectedItemCode","currItemData","originData","parent","find","size","scrollTop","top","position","height","destroy","removeData","remove","rePosition","lastPanel","lastPanelEl","lastPanelLeft","Number","css","left","outerWidth","handler","selectItem","params","itemCode","loadingItem","loadData","then","refreshPanels","always","appendTo","el","panels","push","isParentAllMatched","hasMatchedChildren","each","i","itemData","itemName","name","n","attr","text","on","e","click","openDropdown","openTimeout","clearTimeout","setTimeout","called","fireOnInit","reloaded","isInitialized","reloading","Cascader","originEl","def","initialized","readonly","Array","convertData2Col","isLazy","d","childMap","hasChild","undefined","updateBtnText","btn","getValue","htmlClickHandler","hasClass","cascader","target","parents","close","setValue","opts","extend","onSetFinish","noop","changeFired","names","oldSelectedItems","clearValue","fireInit","fireOnChange","call","updateViewByLayzData","updateViewBySelected","join","loadDataByTreePath","panelNo","rmPanels","splice","rmPanel","off","unshift","newItems","oldItems","fire","allItemsSame","oldItem","oldItemCode","oldItemName","newItem","newItemCode","newItemName","open","isReadonly","toggleClass","slice","setReadonly","reload","items","defered","Deferred","resolve","reject","promise","openedItems","cols","insertAfter","hide","preventDefault","stopPropagation","fn","bsCascader","args","arguments","$this","val","split","apply","prototype","jQuery"],"mappings":"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","file":"bootstrap-cascader.min.js","sourcesContent":["(function ($) {\r\n  'use strict';\r\n\r\n  // DEF_OPTS\r\n  var DEF_OPTS = {\r\n    forceSelect: false,\r\n    splitChar: ' ',\r\n    cls: '',\r\n    btnCls: 'btn-default',\r\n    placeHolder: '请选择',\r\n    dropUp: false,\r\n    lazy: false,\r\n    openOnHover: false,\r\n    openOnHoverDelay: 100,\r\n    openOnHoverDelay4Lazy: 200,\r\n    isSelectable: function (item) {\r\n      return item && (item.selectable === true ||\r\n          item.loaded && (!item.children || item.children.length <= 0) && item.selectable !== false);\r\n    }\r\n  };\r\n\r\n  // TPLS\r\n  var TPLS = {\r\n    containerTpl: '<div class=\"btn-group bootstrap-cascader form-control\"></div>',\r\n    btnTpl: '<button class=\"btn dropdown-toggle bs-placeholder\" type=\"button\">\\\r\n        <span class=\"filter-option pull-left\"></span> <span class=\"caret icon-arrow-down\"></span> <span class=\"icon-cross bscascader-font icon-jiaochacross78\"></span>\\\r\n      </button>',\r\n    dropdownTpl: '<ul class=\"dropdown-menu\"></ul>',\r\n    dropdownItemTpl: '<li>\\\r\n        <a href=\"javascript:\">\\\r\n          <span class=\"text\"></span>\\\r\n          <span class=\"bscascader-font icon-ico-right-arrow item-right-arrow\"></span>\\\r\n          <span class=\"bscascader-font icon-loading item-loading\"></span>\\\r\n          <span class=\"bscascader-font icon-error\"></span>\\\r\n        </a>\\\r\n      </li>'\r\n  };\r\n\r\n  var enHtml = function (value) {\r\n    return !value ? '' : String(value).replace(/&/g, \"&amp;\").replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\").replace(/\"/g, \"&quot;\");\r\n  };\r\n\r\n  // DropdownPanel\r\n  var DropdownPanel = function (data, csd, setValueCallback) {\r\n    if (!data || !data.children || data.children.length <= 0) {\r\n      if (setValueCallback) setValueCallback(data);\r\n      return;\r\n    }\r\n\r\n    var panel = this;\r\n\r\n    this.setItemOpened = function (item, itemEl) {\r\n      panel.panelEl.children('li').removeClass('open');\r\n      itemEl.addClass('open');\r\n      if (item.loaded && item.children.length == 0) itemEl.addClass('no-child');\r\n    };\r\n\r\n    this.selectItemByCode = function (code, setValueCallback) {\r\n      panel.panelEl.children('li[code=\"' + enHtml(code) + '\"]').trigger('selectItem', [setValueCallback]);\r\n    };\r\n\r\n    this.setSelected = function (item, setOpen) {\r\n      var itemEl = panel.panelEl.children('li[code=\"' + enHtml(item.code || item.c) + '\"]');\r\n      itemEl.children('a').addClass('selected');\r\n      if (setOpen) panel.setItemOpened(item, itemEl);\r\n      panel.scrollToOpened();\r\n    };\r\n\r\n    this.isMatchedSelectedItems = function (item, withParents) {\r\n      var currItem = item;\r\n      for (var j = item.level - 1; j >= 0; j--) {\r\n        var selectedItem = csd.selectedItems[j], selectedItemCode = selectedItem.code || selectedItem.c;\r\n        var currItemData = currItem.originData, currItemCode = currItemData.code || currItemData.c;\r\n        if (selectedItemCode != currItemCode) return false;\r\n        if (withParents === false) return true;\r\n        currItem = currItem.parent;\r\n      }\r\n      return true;\r\n    };\r\n\r\n    this.scrollToOpened = function () {\r\n      var panelEl = panel.panelEl, selectedItem = panelEl.find('li.open');\r\n      if (selectedItem.size() <= 0) selectedItem = panelEl.find('li a.selected').parent();\r\n      if (selectedItem.size() > 0) {\r\n        var scrollTop = panelEl.scrollTop(), top = selectedItem.position().top + scrollTop;\r\n        if (scrollTop < top) {\r\n          top = top - (panelEl.height() - selectedItem.height()) / 2;\r\n          panelEl.scrollTop(top);\r\n        }\r\n      }\r\n    };\r\n\r\n    this.destroy = function () {\r\n      panel.panelEl.children('li').removeData('cascaderItem');\r\n      panel.panelEl.remove();\r\n    };\r\n\r\n    this.rePosition = function (lastPanel) {\r\n      if (!lastPanel) return;\r\n\r\n      var lastPanelEl = lastPanel.panelEl, lastPanelLeft = Number((lastPanelEl.css('left') || '').replace('px', ''));\r\n      panel.panelEl.css({left: lastPanelLeft + lastPanelEl.outerWidth()})\r\n    };\r\n\r\n    var handler = function (item, itemEl, selectItem, setValueCallback) {\r\n      if (csd.params.lazy && item.loaded === false) {\r\n        itemEl.addClass('bs-loading');\r\n        var itemCode = item.code || item.c;\r\n\r\n        if (panel.loadingItem) panel.loadingItem = false;\r\n        panel.loadingItem = itemCode;\r\n\r\n        csd.loadData(item).then(function () {\r\n          if (panel.loadingItem == itemCode)\r\n            csd.refreshPanels(item.level + 1, item, setValueCallback);\r\n        }, function () {\r\n          if (panel.loadingItem == itemCode)\r\n            itemEl.addClass('load-error');\r\n        }).always(function () {\r\n          if (panel.loadingItem == itemCode) {\r\n            panel.setItemOpened(item, itemEl);\r\n            panel.loadingItem = false;\r\n          }\r\n          itemEl.removeClass('bs-loading');\r\n        });\r\n      } else {\r\n        csd.refreshPanels(item.level + 1, item, setValueCallback);\r\n        panel.setItemOpened(item, itemEl);\r\n        if (selectItem) csd.selectItem(item, itemEl);\r\n      }\r\n    };\r\n\r\n    panel.panelEl = $(TPLS.dropdownTpl).appendTo(csd.el), panel.data = data;\r\n\r\n    // set panel position\r\n    var lastPanel = csd.panels[csd.panels.length - 1];\r\n    if (lastPanel) {\r\n      var lastPanelEl = lastPanel.panelEl, lastPanelLeft = Number((lastPanelEl.css('left') || '').replace('px', ''));\r\n      panel.panelEl.css({left: lastPanelLeft + lastPanelEl.outerWidth()})\r\n    }\r\n    csd.panels.push(panel);\r\n\r\n    // update panel style\r\n    if (csd.panels.length > 0) {\r\n      csd.el.children('.dropdown-menu').removeClass('first-child last-child');\r\n      csd.panels[0].panelEl.addClass('first-child');\r\n      csd.panels[csd.panels.length - 1].panelEl.addClass('last-child');\r\n    }\r\n\r\n    var isParentAllMatched = false, hasMatchedChildren = false;\r\n    if (csd.selectedItems.length > data.level) isParentAllMatched = panel.isMatchedSelectedItems(data);\r\n\r\n    $.each(data.children, function (i, item) {\r\n      var itemEl = $(TPLS.dropdownItemTpl).appendTo(panel.panelEl), itemData = item.originData;\r\n      var itemName = itemData.name || itemData.n, itemCode = itemData.code || itemData.c;\r\n      itemEl.data(\"cascaderItem\", item).attr('code', itemCode).attr('title', itemName).find('.text').text(itemName);\r\n\r\n      itemEl.on({\r\n        'selectItem': function (e, setValueCallback) {\r\n          handler(item, itemEl, false, setValueCallback);\r\n        },\r\n        'click': function (e, setValueCallback) {\r\n          handler(item, itemEl, true, setValueCallback);\r\n        },\r\n        'openDropdown': function () {\r\n          handler(item, itemEl);\r\n        }\r\n      });\r\n\r\n      if (csd.params.openOnHover) {\r\n        itemEl.on('mouseover', function () {\r\n          if (csd.openTimeout) clearTimeout(csd.openTimeout);\r\n          csd.openTimeout = setTimeout(function () {\r\n            handler(item, itemEl);\r\n          }, csd.params.lazy ? csd.params.openOnHoverDelay4Lazy : csd.params.openOnHoverDelay);\r\n        });\r\n      }\r\n\r\n      if (item.loaded && (!item.children || item.children.length <= 0)) itemEl.addClass('no-child');\r\n\r\n      // update selected items view state\r\n      if (csd.selectedItems.length >= item.level && isParentAllMatched) {\r\n        if (panel.isMatchedSelectedItems(item, false)) {\r\n          hasMatchedChildren = true;\r\n          if (csd.selectedItems.length > item.level) {\r\n            handler(item, itemEl, false, setValueCallback);\r\n          } else {\r\n            if (csd.selectedItems.length == csd.panels.length)\r\n              $.each(csd.selectedItems, function (j, selectedItem) {\r\n                csd.panels[j].setSelected(selectedItem, j < csd.selectedItems.length - 1);\r\n              });\r\n            if (setValueCallback) setValueCallback(item), setValueCallback.called = true;\r\n            else {\r\n              csd.fireOnInit(), csd.reloaded();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (csd.selectedItems.length > data.level && !hasMatchedChildren && csd.params.lazy) {\r\n      if ((!csd.isInitialized || csd.reloading))\r\n        csd.isInitialized ? csd.reloaded() : csd.fireOnInit();\r\n      if (setValueCallback) setValueCallback(), setValueCallback.called = true;\r\n    }\r\n\r\n    if (setValueCallback && !setValueCallback.called) setValueCallback(data);\r\n  };\r\n\r\n  // Cascader\r\n  var Cascader = function (params, originEl) {\r\n    var csd = this;\r\n    params = params || {};\r\n    for (var def in DEF_OPTS) if (typeof params[def] === 'undefined') params[def] = DEF_OPTS[def];\r\n    csd.params = params, csd.initialized = false, csd.selectedItems = [], csd.readonly = false;\r\n    if (csd.params.value instanceof Array) csd.selectedItems = [];\r\n\r\n    // initBtn\r\n    var initBtn = function () {\r\n      csd.btn = $(TPLS.btnTpl).addClass(params.btnCls).click(function () {\r\n        csd.open();\r\n      }).appendTo(csd.el);\r\n      csd.btn.children('.icon-cross').click(function (e) {\r\n        if (csd.isReadonly()) return;\r\n        csd.clearValue(true);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      });\r\n      updateBtnText(params.placeHolder);\r\n    };\r\n\r\n    // convertData2Col\r\n    var convertData2Col = function (data, parent) {\r\n      var isLazy = csd.params.lazy;\r\n      $.each(data, function (i, item) {\r\n        var itemCode = item.code || item.c, children = item.data || item.d, itemData = parent.childMap[itemCode];\r\n        if (!itemData) {\r\n          itemData = {\r\n            childMap: {}, children: [], loaded: !isLazy || (children && children.length > 0) || item.hasChild === false,\r\n            level: parent.level + 1, parent: parent, originData: item\r\n          };\r\n          parent.children.push(itemData);\r\n          parent.childMap[itemCode] = itemData;\r\n        } else itemData.loaded = !isLazy || (children && children.length > 0) || item.hasChild === false;\r\n        if (item.selectable !== undefined) itemData.selectable = item.selectable;\r\n        if (children && children.length > 0) convertData2Col(children, itemData);\r\n      });\r\n    };\r\n\r\n    // updateBtnText\r\n    var updateBtnText = function (text) {\r\n      csd.btn.attr('title', text).children('.filter-option').text(text);\r\n      if (csd.getValue().length > 0) csd.btn.removeClass('bs-placeholder').addClass('selected');\r\n      else csd.btn.addClass('bs-placeholder').removeClass('selected');\r\n    };\r\n\r\n    // htmlClickHandler\r\n    var htmlClickHandler = function (e) {\r\n      if (!csd.el.hasClass('open')) return;\r\n      var cascader = $(e.target).parents('.bootstrap-cascader');\r\n      if (cascader.size() == 0) csd.close();\r\n      else if (cascader[0] != csd.el[0]) csd.close();\r\n    };\r\n\r\n    // setValue\r\n    csd.setValue = function (value, opts) {\r\n      opts = $.extend({onSetFinish: $.noop}, opts || {});\r\n      var names = [], oldSelectedItems = csd.getValue(), changeFired;\r\n      csd.clearValue();\r\n      if (!value || !(value instanceof Array) || value.length <= 0) {\r\n        opts.fireInit ? csd.fireOnInit() : changeFired = csd.fireOnChange(oldSelectedItems, csd.getValue());\r\n        opts.onSetFinish.call(csd, changeFired);\r\n        return;\r\n      }\r\n\r\n      if (csd.params.forceSelect) {\r\n        var updateViewByLayzData = function () {\r\n          $.each(value, function (i, item) {\r\n            csd.selectedItems.push({code: item.code || item.c, name: item.name || item.n});\r\n            names.push(item.name || item.n);\r\n\r\n            if (csd.panels[i]) csd.panels[i].setSelected(item, i < csd.selectedItems.length - 1);\r\n          });\r\n          csd.updateViewBySelected(function (item) {\r\n            if (item && csd.params.isSelectable(item)) {\r\n              updateBtnText(names.join(csd.params.splitChar));\r\n            } else csd.clearValue(false);\r\n            opts.fireInit ? csd.fireOnInit() : changeFired = csd.fireOnChange(oldSelectedItems, csd.getValue());\r\n            opts.onSetFinish.call(csd, changeFired);\r\n          });\r\n        };\r\n        if (csd.params.lazy && csd.params.loadDataByTreePath) {\r\n          csd.loadDataByTreePath(value).then(function () {\r\n            updateViewByLayzData();\r\n          }, function () {\r\n            opts.fireInit ? csd.fireOnInit() : changeFired = csd.fireOnChange(oldSelectedItems, csd.getValue());\r\n            opts.onSetFinish.call(csd, changeFired);\r\n          });\r\n        } else updateViewByLayzData();\r\n      } else {\r\n        $.each(value, function (i, item) {\r\n          csd.selectedItems.push({code: item.code || item.c, name: item.name || item.n});\r\n          names.push(item.name || item.n);\r\n        });\r\n        updateBtnText(names.join(csd.params.splitChar));\r\n        csd.updateViewBySelected();\r\n        opts.fireInit ? csd.fireOnInit() : changeFired = csd.fireOnChange(oldSelectedItems, csd.getValue());\r\n        opts.onSetFinish.call(csd, changeFired);\r\n      }\r\n    };\r\n\r\n    // refreshPanels\r\n    csd.refreshPanels = function (panelNo, data, setValueCallback) {\r\n      var rmPanels = csd.panels.splice(panelNo - 1, csd.panels.length);\r\n      if (rmPanels) $.each(rmPanels, function (i, rmPanel) {\r\n        rmPanel.destroy();\r\n      });\r\n\r\n      new DropdownPanel(data, csd, setValueCallback);\r\n    };\r\n\r\n    // destroy\r\n    csd.destroy = function () {\r\n      $.each(csd.panels, function (i, panel) {\r\n        panel.destroy();\r\n      });\r\n      $('html').off('click', htmlClickHandler);\r\n      csd.params.el.removeData(\"bsCascader\");\r\n    };\r\n\r\n    // selectItem\r\n    csd.selectItem = function (item, itemEl) {\r\n      if (!csd.params.isSelectable.call(csd, item)) return;\r\n\r\n      csd.el.find('li a').removeClass('selected');\r\n      itemEl.children('a').addClass('selected');\r\n      csd.el.find('li.open a').addClass('selected');\r\n\r\n      item = item || itemEl.data('cascaderItem');\r\n      var names = [], oldSelectedItems = csd.getValue();\r\n      csd.selectedItems = [];\r\n      while (item.parent) {\r\n        var itemData = item.originData, code = itemData.code || itemData.c, name = itemData.name || itemData.n;\r\n        csd.selectedItems.unshift({code: code, name: name});\r\n        names.unshift(name);\r\n        item = item.parent;\r\n      }\r\n\r\n      updateBtnText(names.join(csd.params.splitChar));\r\n      csd.close(false);\r\n\r\n      var newItems = csd.getValue();\r\n      csd.fireOnChange(oldSelectedItems, newItems);\r\n      csd.params.el.trigger('bs.cascader.select', [newItems]);\r\n    };\r\n\r\n    // fireOnChange\r\n    csd.fireOnChange = function (oldItems, newItems) {\r\n      var fire = true;\r\n      if (oldItems != newItems && oldItems.length == newItems.length) {\r\n        var allItemsSame = true;\r\n        $.each(oldItems, function (i, oldItem) {\r\n          var oldItemCode = oldItem.code || oldItem.c, oldItemName = oldItem.name || oldItem.n;\r\n          var newItem = newItems[i], newItemCode = newItem.code || newItem.c, newItemName = newItem.name || newItem.n;\r\n          if (oldItemCode != newItemCode || oldItemName != newItemName) {\r\n            allItemsSame = false;\r\n            return false;\r\n          }\r\n        });\r\n        if (allItemsSame) fire = false;\r\n      }\r\n      if (fire) csd.params.el.trigger('bs.cascader.change', [oldItems, newItems]);\r\n      return fire;\r\n    };\r\n\r\n    // close\r\n    csd.close = function (updateViewBySelected) {\r\n      csd.el.removeClass('open');\r\n      if (updateViewBySelected !== false) csd.updateViewBySelected();\r\n    };\r\n\r\n    // update view by selected\r\n    csd.updateViewBySelected = function (setValueCallback) {\r\n      if (csd.selectedItems.length > 0 && csd.panels.length > 0)\r\n        csd.panels[0].selectItemByCode(csd.selectedItems[0].code || csd.selectedItems[0].c, setValueCallback);\r\n    };\r\n\r\n    // open\r\n    csd.open = function () {\r\n      if (csd.isReadonly()) return;\r\n      csd.el.toggleClass('open');\r\n\r\n      var lastPanel;\r\n      $.each(csd.panels, function (i, panel) {\r\n        panel.rePosition(lastPanel);\r\n        panel.scrollToOpened();\r\n        lastPanel = panel;\r\n      });\r\n    };\r\n\r\n    // getValue\r\n    csd.getValue = function () {\r\n      return csd.selectedItems.slice();\r\n    };\r\n\r\n    // clearValue\r\n    csd.clearValue = function (fire) {\r\n      csd.selectedItems = [];\r\n      csd.el.find('.dropdown-menu li a').removeClass('selected');\r\n      updateBtnText(csd.params.placeHolder);\r\n\r\n      if (fire) csd.params.el.trigger('bs.cascader.clear');\r\n    };\r\n\r\n    // setReadonly\r\n    csd.setReadonly = function (readonly) {\r\n      readonly = readonly !== false;\r\n      csd.readonly = readonly;\r\n      if (readonly) {\r\n        csd.el.addClass('readonly');\r\n        csd.btn.addClass('disabled');\r\n      } else {\r\n        csd.el.removeClass('readonly');\r\n        csd.btn.removeClass('disabled');\r\n      }\r\n    };\r\n\r\n    // isReadonly\r\n    csd.isReadonly = function () {\r\n      return csd.readonly;\r\n    };\r\n\r\n    // reload\r\n    csd.reload = function () {\r\n      csd.reloading = true, csd.data = {childMap: {}, children: [], loaded: false, level: 0};\r\n      csd.loadData().then(function () {\r\n        csd.refreshPanels(1, csd.data);\r\n        if (csd.params.value) csd.setValue(csd.params.value);\r\n        if (!csd.params.lazy || !csd.params.value) csd.reloaded();\r\n      });\r\n    };\r\n\r\n    // reloaded\r\n    csd.reloaded = function () {\r\n      if (!csd.reloading) return;\r\n\r\n      csd.reloading = false;\r\n      csd.params.el.trigger('bs.cascader.reloaded');\r\n    };\r\n\r\n    // fireOnInit\r\n    csd.fireOnInit = function () {\r\n      if (csd.isInitialized) return;\r\n\r\n      csd.isInitialized = true;\r\n      csd.params.el.trigger('bs.cascader.inited');\r\n    };\r\n\r\n    // loadDataByTreePath\r\n    csd.loadDataByTreePath = function (items) {\r\n      var defered = $.Deferred();\r\n      csd.params.loadDataByTreePath.call(csd, items, function (data) {\r\n        if (data) {\r\n          if (data.length > 0) {\r\n            if (!csd.data.originData) csd.data.originData = data;\r\n            convertData2Col(data, csd.data);\r\n            csd.data.loaded = true;\r\n            defered.resolve(data);\r\n          } else defered.reject();\r\n        } else defered.reject();\r\n      });\r\n      return defered.promise();\r\n    };\r\n\r\n    // loadData\r\n    csd.loadData = function (item) {\r\n      // get opened items\r\n      var openedItems = [];\r\n      if (item) {\r\n        var currItem = item;\r\n        while (currItem.parent) {\r\n          openedItems.unshift(currItem.originData);\r\n          currItem = currItem.parent;\r\n        }\r\n      } else item = csd.data;\r\n\r\n      var defered = $.Deferred();\r\n      csd.params.loadData.call(csd, openedItems, function (data) {\r\n        if (data) {\r\n          if (data.length > 0) {\r\n            if (!openedItems || openedItems.length <= 0) csd.data.originData = data;\r\n            convertData2Col(data, item);\r\n          }\r\n          item.loaded = true;\r\n          defered.resolve(data);\r\n        } else defered.reject();\r\n      });\r\n      return defered.promise();\r\n    };\r\n\r\n    csd.data = {childMap: {}, children: [], loaded: false, level: 0}, csd.panels = [];\r\n    csd.cols = [], csd.el = $(TPLS.containerTpl).addClass(csd.params.cls);\r\n    if (csd.params.dropUp) csd.el.addClass('dropup');\r\n    if (csd.params.replace) {\r\n      csd.el.insertAfter(params.el);\r\n      params.el.hide();\r\n    } else csd.el.appendTo(params.el);\r\n    initBtn();\r\n    if (csd.params.readonly) csd.setReadonly(true);\r\n\r\n    originEl.data(\"bsCascader\", this);\r\n    csd.loadData().always(function () {\r\n      csd.refreshPanels(1, csd.data);\r\n      if (csd.params.value) csd.setValue(csd.params.value, {fireInit: true});\r\n      else csd.fireOnInit();\r\n    });\r\n\r\n    $('html').on('click', htmlClickHandler);\r\n  };\r\n\r\n  $.fn.bsCascader = function (params) {\r\n    var args = arguments;\r\n    return this.each(function () {\r\n      if (!this) return;\r\n      var $this = $(this);\r\n\r\n      var bsCascader = $this.data(\"bsCascader\");\r\n      if (!bsCascader && params != 'destroy') {\r\n        params = $.extend({\r\n          el: $this, value: $this.val() ? $this.val().split(params.splitChar || ' ') : ''\r\n        }, params);\r\n        bsCascader = new Cascader(params, $this);\r\n      }\r\n      if (bsCascader && typeof params === typeof \"\")\r\n        bsCascader[params].apply(bsCascader, Array.prototype.slice.call(args, 1));\r\n    });\r\n  }\r\n\r\n})(jQuery);\r\n"]}